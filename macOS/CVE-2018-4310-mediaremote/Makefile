BIN=./bin
SOURCE=poc.m

payload: prepare $(SOURCE)
	clang $(SOURCE) \
		-framework Foundation -dynamiclib \
		-framework MediaRemote -F /System/Library/PrivateFrameworks \
		-o $(BIN)/payload.dylib

prepare:
	mkdir -p $(BIN)

clean:
	rm -rf $(BIN)/*

format:
	clang-format -i $(SOURCE)